webpackJsonp([20],{"6H+/":function(t,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=i("go92"),n=i.n(e),s={name:"pay",data:function(){return{loading:!0,id:"",data:{},imgSrc:"",imgLoading:!1}},methods:{onClickLeft:function(){this.$router.push({name:"deal",query:{active:2}})},getData:function(){var t=this;this.axios.get("/public/index.php/api/trade/payxinxi1/id/"+this.id).then(function(a){t.loading=!1,1===a.state&&(t.data=JSON.parse(a.data_mairu))})},selectFile:function(){this.$refs.file_input.click()},upImg:function(t){var a=this,i=t.target.files[0],e=new FormData;if(e.append("fileVal",i,i.name),i.size>3145728)return this.$toast("请上传小于3M的图片"),!1;this.imgLoading=!0;var n=60,s=setInterval(function(){0===--n&&(clearInterval(s),a.$dialog.alert({title:"提示",message:"上传超时,请重新上传"}).then(function(){a.$router.go(0)}))},1e3);this.axios.post("/public/index.php/api/trade/avatar1",e,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){a.imgLoading=!1,1===t.state&&(a.$toast("上传成功"),clearInterval(s),a.imgSrc=t.msg)})},copy:function(){var t=this,a=new n.a(".tag-read");a.on("success",function(i){t.$toast("复制成功"),a.destroy()}),a.on("error",function(t){console.log("该浏览器不支持自动复制"),a.destroy()})},submit:function(){var t=this;this.$dialog.confirm({title:"警告",message:"确定后图片无法更改，上传错误图片可能会影响交易，是否确定？"}).then(function(){t.axios.post("/public/index.php/api/trade/pay1/id/"+t.id,{tupian:t.imgSrc}).then(function(a){1===a.state&&(t.$toast(a.msg),t.$router.push({name:"deal",query:{active:2}}))})}).catch(function(){})},cancel:function(){var t=this;this.$dialog.confirm({title:"警告",message:"一天取消交易2次将会限制进入交易市场，是否确定？"}).then(function(){t.axios.post("/public/index.php/api/trade/quxiao1",{id:t.id}).then(function(a){1===a.state&&(t.$toast(a.msg),t.$router.push({name:"deal",query:{active:2}}))})}).catch(function(){})}},mounted:function(){this.id=this.$route.query.id,this.getData()}},c={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"pay"},[i("van-nav-bar",{attrs:{title:"支付","left-arrow":""},on:{"click-left":t.onClickLeft}}),t._v(" "),t.loading?i("p",{staticClass:"flex-center"},[i("van-loading")],1):t._e(),t._v(" "),t.loading?t._e():i("div",[i("van-cell-group",[i("van-cell",{attrs:{title:"手机号",value:t.data.mai_jia},on:{click:t.copy}}),t._v(" "),i("van-cell",{staticClass:"tag-read",attrs:{title:"支付宝",label:"点击复制","data-clipboard-text":t.data.mai_jia,value:t.data.mai_jia},on:{click:t.copy}}),t._v(" "),i("van-cell",{attrs:{title:"付款人民币",value:t.data.renmingbi}})],1),t._v(" "),i("div",{staticClass:"bg-white padder-v m-t"},[i("p",{staticClass:"text-center"},[t._v("上传截图")]),t._v(" "),i("div",{staticClass:"text-center"},[i("div",{staticClass:"imgBox",on:{click:t.selectFile}},[t.imgSrc?i("img",{attrs:{src:t.imgSrc,alt:""}}):t._e(),t._v(" "),t.imgSrc||t.imgLoading?t._e():i("van-icon",{attrs:{name:"photograph",size:"2em"}}),t._v(" "),t.imgLoading?i("van-loading"):t._e(),t._v(" "),i("input",{ref:"file_input",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:t.upImg}})],1)])]),t._v(" "),i("div",{staticClass:"text-center m-t"},[i("van-button",{attrs:{size:"large",type:"primary"},on:{click:t.submit}},[t._v("提交")]),t._v(" "),i("van-button",{staticClass:"m-t",attrs:{size:"large",type:"danger"},on:{click:t.cancel}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]};var o=i("Mz/3")(s,c,!1,function(t){i("qNQq")},null,null);a.default=o.exports},qNQq:function(t,a){}});