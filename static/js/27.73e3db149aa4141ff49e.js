webpackJsonp([27],{"v6j+":function(t,s){},vPVC:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a={name:"resetPwd",data:function(){return{imgCodeSrc:"/public/index.php/captcha.html",form:{phone:"",captcha:"",code:"",password:"",repassword:""},disMsgBtn:!1,msgBtnTxt:"发送验证码",btnLoading:!1}},methods:{refresh:function(){this.imgCodeSrc+="?t="+Date.parse(new Date)},sendCode:function(){var t=this;this.form.phone?/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$/.test(this.form.phone)?this.form.captcha?this.axios.get("/public/index.php/api/index/smszhaohui?mobile="+this.form.phone+"&captcha="+this.form.captcha).then(function(s){if(1===s.state){t.$toast.success("发送成功");var e=60,a=setInterval(function(){e--,t.msgBtnTxt=e+"s后重新获取",t.disMsgBtn=!0,e||(t.msgBtnTxt="发送验证码",t.disMsgBtn=!1,t.refresh(),clearInterval(a))},1e3)}}):this.$toast("请输入图形验证码"):this.$toast("请输入正确的手机号"):this.$toast("请输入手机号")},submit:function(){var t=this,s={mobile:this.form.phone,code:this.form.code,password:this.form.password};this.form.phone?s.password?s.password===this.form.repassword?s.code?(this.btnLoading=!0,this.axios.post("/public/index.php/api/index/xiugai",s).then(function(s){t.btnLoading=!1,1===s.state&&t.$dialog.alert({title:"提示",message:"重置成功"}).then(function(){t.$router.push({name:"login"})})})):this.$toast("请输入手机验证码"):this.$toast("密码不一致"):this.$toast("请输入密码"):this.$toast("请输入手机号")}}},o={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"resetPwd"},[a("img",{staticClass:"m-b-lg",attrs:{src:e("7Otq"),alt:""}}),t._v(" "),a("van-cell-group",[a("van-field",{attrs:{clearable:"",label:"手机号",placeholder:"请输入手机号"},model:{value:t.form.phone,callback:function(s){t.$set(t.form,"phone",s)},expression:"form.phone"}}),t._v(" "),a("van-field",{attrs:{type:"password",label:"密码",placeholder:"请输入密码"},model:{value:t.form.password,callback:function(s){t.$set(t.form,"password",s)},expression:"form.password"}}),t._v(" "),a("van-field",{attrs:{type:"password",label:"确认新密码",placeholder:"请确认密码"},model:{value:t.form.repassword,callback:function(s){t.$set(t.form,"repassword",s)},expression:"form.repassword"}}),t._v(" "),a("van-field",{attrs:{label:"验证码",placeholder:"请输入验证码"},model:{value:t.form.captcha,callback:function(s){t.$set(t.form,"captcha",s)},expression:"form.captcha"}},[a("img",{staticClass:"imgCode",attrs:{slot:"button",src:t.imgCodeSrc,alt:""},on:{click:t.refresh},slot:"button"})]),t._v(" "),a("van-field",{attrs:{label:"手机验证码",placeholder:"请输入手机验证码"},model:{value:t.form.code,callback:function(s){t.$set(t.form,"code",s)},expression:"form.code"}},[a("van-button",{attrs:{slot:"button",disabled:t.disMsgBtn,size:"small",type:"primary"},on:{click:t.sendCode},slot:"button"},[t._v(t._s(t.msgBtnTxt)+"\n      ")])],1)],1),t._v(" "),a("p",{staticClass:"m-t-lg"},[a("van-button",{staticClass:"resetPwd-btn",attrs:{size:"large",loading:t.btnLoading},on:{click:t.submit}},[t._v("重置密码")])],1)],1)},staticRenderFns:[]};var n=e("Mz/3")(a,o,!1,function(t){e("v6j+")},null,null);s.default=n.exports}});