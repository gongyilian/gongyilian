webpackJsonp([28],{cqMm:function(e,t){},"i/Si":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={name:"releaseSale",components:{},data:function(){return{releaseBuyForm:{xiane1:"",xiane2:"",premium:1,price:"",coin:""},limit:{nowPrice:"",minPrice:"",maxPrice:""}}},computed:{priceTip:function(){var e=Number(this.limit.min),t=Number(this.limit.max),i=Number(this.limit.price);return"单价范围为"+(i-e).toFixed(3)+"-"+(i+t).toFixed(3)}},methods:{releaseSale:function(){var e=this,t=this.releaseBuyForm;if(!t.coin)return this.$toast("请输入出售数量"),!1;if(t.coin<10||t.coin>1e3)return this.$toast("出售数量10-1000之间"),!1;if(!t.price)return this.$toast("请输入单价"),!1;var i=Number(this.limit.min),a=Number(this.limit.max),r=Number(this.limit.price);return Number(t.price)<r-i||Number(t.price)>r+a?(this.$toast("单价范围为"+(r-i).toFixed(3)+"-"+(r+a).toFixed(3)),!1):t.xiane1?t.xiane2?Number(t.xiane2)<Number(t.xiane1)?(this.$toast("最大下单金额不能小于最小下单金额"),!1):(this.releaseBuyLoading=!0,void this.axios.get("/public/index.php/api/Trade/fabugoumai",{params:t}).then(function(t){e.releaseBuyLoading=!1,1===t.state&&(e.$toast("发布成功"),e.$router.push({name:"deal",query:{active:1}}))})):(this.$toast("请输入最大下单金额"),!1):(this.$toast("请输入最小下单金额"),!1)}},mounted:function(){this.limit=this.$route.query}},r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"releaseSale"}},[i("van-nav-bar",{attrs:{title:"委托出售","left-arrow":"","right-text":"成为商户"},on:{"click-right":function(t){e.$router.push({name:"beBusiness"})},"click-left":function(t){e.$router.back()}}}),e._v(" "),i("van-cell-group",[i("van-field",{attrs:{clearable:"",label:"出售数量",type:"number",placeholder:"请输入出售数量(10-1000之间)"},model:{value:e.releaseBuyForm.coin,callback:function(t){e.$set(e.releaseBuyForm,"coin",t)},expression:"releaseBuyForm.coin"}}),e._v(" "),i("van-field",{attrs:{type:"number",placeholder:e.priceTip},model:{value:e.releaseBuyForm.price,callback:function(t){e.$set(e.releaseBuyForm,"price",t)},expression:"releaseBuyForm.price"}},[i("div",{attrs:{slot:"label"},slot:"label"},[i("span",[e._v("出售单价 "),i("sub",{staticClass:"text-xs"},[e._v("(￥)")])])])]),e._v(" "),i("van-field",{attrs:{type:"number",placeholder:"请输入最小限额"},model:{value:e.releaseBuyForm.xiane1,callback:function(t){e.$set(e.releaseBuyForm,"xiane1",t)},expression:"releaseBuyForm.xiane1"}},[i("div",{attrs:{slot:"label"},slot:"label"},[i("span",[e._v("最小限额 "),i("sub",{staticClass:"text-xs"},[e._v("(￥)")])])])]),e._v(" "),i("van-field",{attrs:{type:"number",placeholder:"请输入最大限额"},model:{value:e.releaseBuyForm.xiane2,callback:function(t){e.$set(e.releaseBuyForm,"xiane2",t)},expression:"releaseBuyForm.xiane2"}},[i("div",{attrs:{slot:"label"},slot:"label"},[i("span",[e._v("最大限额 "),i("sub",{staticClass:"text-xs"},[e._v("(￥)")])])])])],1),e._v(" "),i("div",{staticClass:"padder m-t"},[i("van-button",{attrs:{size:"large",type:"danger",round:""},on:{click:e.releaseSale}},[e._v("发布")])],1)],1)},staticRenderFns:[]};var s=i("Mz/3")(a,r,!1,function(e){i("cqMm")},null,null);t.default=s.exports}});