webpackJsonp([30],{"+Uw9":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={name:"regist",data:function(){return{imgCode:"/public/index.php/captcha.html",captcha:"",form:{mobile:"",nickname:"",password:"",code:"",__token__:""},formObj:{mobile:"请输入手机号",nickname:"请输入昵称",code:"请输入手机验证码",password:"请输入密码"},disMsgBtn:!1,msgBtnTxt:"发送验证码",registLoading:!1,myCaptcha:null,token:""}},methods:{toLogin:function(){this.$router.push({name:"login"})},refresh:function(){this.imgCode+="?t="+Date.parse(new Date)},sendCode:function(){var t=this;this.form.mobile?/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$/.test(this.form.mobile)?this.token?this.axios.get("/public/index.php/api/index/sms?mobile="+this.form.mobile+"&captcha="+this.token).then(function(e){if(t.myCaptcha.reload(),t.token="",1===e.state){t.$toast.success("发送成功");var s=60,i=setInterval(function(){s--,t.msgBtnTxt=s+"s后重新获取",t.disMsgBtn=!0,s||(t.msgBtnTxt="发送验证码",t.disMsgBtn=!1,t.refresh(),clearInterval(i))},1e3)}}):this.$toast("请完成滑块验证"):this.$toast("请输入正确的手机号"):this.$toast("请输入手机号")},saveToken:function(t){this.token=t},regist:function(){var t=this,e=this.form;for(var s in e)if(!e[s]&&"__token__"!==s)return void this.$toast(this.formObj[s]);/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$/.test(this.form.mobile)?(this.registLoading=!0,this.axios.post("/public/index.php/api/index/xieru1",this.form).then(function(e){t.registLoading=!1,1===e.state&&t.$dialog.alert({title:"提示",message:"注册成功，实名认证成功赠送二阶矿机"}).then(function(e){t.$router.push({name:"login"})})})):this.$toast("请输入正确的手机号")}},mounted:function(){var t=this;this.form.__token__=this.$route.query.ref,this.$nextTick(function(){t.myCaptcha=_dx.Captcha(t.$refs.c1,{appId:"7216abfd3e964dedcbb2dafe7d70d8ef",style:"inline",width:300,success:t.saveToken})})}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"regist"},[i("img",{staticClass:"m-b-lg",attrs:{src:s("7Otq"),alt:""}}),t._v(" "),i("van-cell-group",[i("van-field",{attrs:{clearable:"",label:"手机号",placeholder:"请输入手机号"},model:{value:t.form.mobile,callback:function(e){t.$set(t.form,"mobile",e)},expression:"form.mobile"}}),t._v(" "),i("van-field",{attrs:{clearable:"",disabled:"",label:"支付宝",placeholder:"收款账号必须和手机号相同"},model:{value:t.form.mobile,callback:function(e){t.$set(t.form,"mobile",e)},expression:"form.mobile"}}),t._v(" "),i("van-field",{attrs:{clearable:"",label:"昵称",placeholder:"请输入昵称"},model:{value:t.form.nickname,callback:function(e){t.$set(t.form,"nickname",e)},expression:"form.nickname"}}),t._v(" "),i("van-field",{attrs:{type:"password",label:"登录密码",placeholder:"请输入密码"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),t._v(" "),i("van-cell",{staticClass:"c1"},[i("div",{ref:"c1",attrs:{id:"c1"}})]),t._v(" "),i("van-field",{attrs:{label:"手机验证码",placeholder:"请输入手机验证码"},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}},[i("van-button",{attrs:{slot:"button",disabled:t.disMsgBtn,size:"small",type:"primary"},on:{click:t.sendCode},slot:"button"},[t._v(t._s(t.msgBtnTxt)+"\n      ")])],1)],1),t._v(" "),i("p",{staticClass:"m-t-lg"},[i("van-button",{staticClass:"regist-btn",attrs:{size:"large",loading:t.registLoading},on:{click:t.regist}},[t._v("立即注册")])],1),t._v(" "),i("p",{on:{click:t.toLogin}},[t._v("已有账户?")])],1)},staticRenderFns:[]};var a=s("Mz/3")(i,o,!1,function(t){s("M2lj")},null,null);e.default=a.exports},M2lj:function(t,e){}});